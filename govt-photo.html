<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Govt Exam Photo Resizer â€“ Easy File Tools</title>
  <style>
    body { margin:0; font-family: system-ui, sans-serif; background:#f5f7fb; }
    .tool-container { max-width:420px; margin:20px auto; padding:14px; background:#fff; border-radius:14px; box-shadow:0 10px 25px rgba(0,0,0,.08); }
    h1 { font-size:20px; text-align:center; }
    .drop-area { border:2px dashed #6b6bff; border-radius:12px; padding:24px 12px; text-align:center; cursor:pointer; }
    .drop-area.dragover { background:#eef2ff; border-color:#4f46e5; }
    button { width:100%; padding:10px; border:0; border-radius:10px; background:#4f46e5; color:#fff; margin:6px 0; }
    .preview img { max-width:100%; border-radius:10px; margin-top:8px; }
    .download-btn { display:block; margin-top:10px; background:#22c55e; color:#fff; text-align:center; padding:10px; border-radius:10px; text-decoration:none; }
  </style>
</head>
<body>
  <div class="tool-container">
    <h1>Government Exam Photo Resizer</h1>

    <div id="dropBox" class="drop-area">ðŸ“¸ Click or Drop Photo</div>
    <input type="file" id="fileInput" accept="image/*" hidden>

    <button onclick="resizeToKB(50)">Resize to 50 KB</button>
    <button onclick="resizeToKB(100)">Resize to 100 KB</button>
    <button onclick="resizeToKB(200)">Resize to 200 KB</button>

    <div class="preview">
      <div id="sizeInfo"></div>
      <img id="previewImg">
      <a id="downloadBtn" class="download-btn" download="govt-photo.jpg" style="display:none;">Download Photo</a>
    </div>
  </div>

  <script>
    const dropBox = document.getElementById("dropBox");
    const fileInput = document.getElementById("fileInput");
    const previewImg = document.getElementById("previewImg");
    const downloadBtn = document.getElementById("downloadBtn");
    const sizeInfo = document.getElementById("sizeInfo");
    let currentImage = null;

    dropBox.onclick = () => fileInput.click();
    dropBox.ondragover = e => (e.preventDefault(), dropBox.classList.add("dragover"));
    dropBox.ondragleave = () => dropBox.classList.remove("dragover");
    dropBox.ondrop = e => { e.preventDefault(); dropBox.classList.remove("dragover"); loadImage(e.dataTransfer.files[0]); };
    fileInput.onchange = e => loadImage(e.target.files[0]);

    function loadImage(file) {
      const r = new FileReader();
      r.onload = () => { const img = new Image(); img.onload = () => currentImage = img; previewImg.src = r.result; sizeInfo.innerText = "Original: " + Math.round(file.size/1024) + " KB"; img.src = r.result; };
      r.readAsDataURL(file);
    }

    function resizeToKB(targetKB) {
      if (!currentImage) return alert("Upload photo first!");
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = currentImage.width;
      canvas.height = currentImage.height;
      ctx.drawImage(currentImage, 0, 0);

      let min = .1, max = .95, best;
      for (let i=0;i<10;i++){
        let q=(min+max)/2;
        let d=canvas.toDataURL("image/jpeg",q);
        let kb=Math.round(d.length*3/4/1024);
        if(kb>targetKB) max=q; else (min=q,best=d);
      }

      previewImg.src = best;
      downloadBtn.href = best;
      downloadBtn.style.display="block";
      sizeInfo.innerText = "Final: ~" + Math.round(best.length*3/4/1024) + " KB";
    }
  </script>
</body>
</html>
